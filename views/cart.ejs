<%- include('./partials/header') %>

    <div class="w-full min-h-screen bg-gray-50 flex items-start px-24 py-20 gap-14">

        <% if (user.cart && user.cart.length> 0) { %>

            <div class="w-[32%] flex flex-col gap-8">

                <% user.cart.forEach(item=> { %>

                    <div class="rounded-xl overflow-hidden shadow-md bg-white">
                        <div class="w-full flex justify-center items-center h-80"
                            style="background-color: <%= item.bgcolor %>">
                            <img class="h-[18rem] object-contain"
                                src="data:image/jpeg;base64,<%= item.image.toString('base64') %>" alt="">
                        </div>

                        <div class="w-full flex justify-between items-center px-6 py-4"
                            style="background-color: <%= item.panelcolor %>">
                            <h3 class="text-xl font-semibold">
                                <%= item.name || 'Clinge Bag' %>
                            </h3>
                            <div class="flex items-center gap-3">
                                <i
                                    class="w-8 h-8 bg-white shadow flex rounded-full items-center justify-center ri-add-line cursor-pointer"></i>
                                <div class="px-3 py-1 rounded-md bg-white font-medium text-black">01</div>
                                <i
                                    class="w-8 h-8 bg-white shadow flex rounded-full items-center justify-center ri-subtract-line cursor-pointer"></i>
                            </div>
                        </div>

                        <div class="flex items-center justify-between px-6 py-3"
                            style="background-color: <%= item.textcolor %>">
                            <h4 class="text-base font-medium">Net Total</h4>
                            <h2 class="text-lg font-semibold text-blue-700">
                                ₹ <%= item.price - item.discount + 20 %>
                            </h2>
                        </div>
                    </div>

                    <% }) %>

            </div>

            <div class="w-[68%] bg-white rounded-xl shadow-md p-10">
                <h3 class="text-2xl font-semibold mb-8">Price Breakdown</h3>

                <div class="space-y-4">
                    <% user.cart.forEach(item=> { %>
                        <div class="flex justify-between text-gray-700">
                            <h4 class="font-medium">
                                <%= item.name || 'Product' %>
                            </h4>
                            <h4>₹ <%= item.price %>
                            </h4>
                        </div>
                        <% }) %>

                            <div class="flex justify-between text-gray-700 pt-4">
                                <h4>Platform Fee</h4>
                                <h4>₹ 20</h4>
                            </div>

                            <div class="flex justify-between text-gray-700">
                                <h4>Shipping Fee</h4>
                                <h4 class="text-green-600 font-medium">FREE</h4>
                            </div>
                </div>

                <div class="w-full h-[1px] bg-gray-300 my-8"></div>

                <div class="flex justify-between items-center">
                    <h3 class="text-xl font-semibold">Total Amount</h3>
                    <h3 class="font-bold text-2xl text-green-600">
                        ₹ <%= user.cart.reduce((sum, item)=> sum + (item.price - item.discount), 0) + 20 %>
                    </h3>
                </div>
            </div>

            <% } else { %>

                <h2 class="text-xl font-medium">Your cart is empty</h2>

                <% } %>

    </div>

    <%- include('./partials/footer') %>