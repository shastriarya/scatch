<%- include('./partials/header') %>

    <div class="min-h-screen bg-[#f6f7fb] px-16 py-14 flex gap-12">

        <!-- ================= SIDEBAR ================= -->
        <aside class="w-[22%] bg-white rounded-2xl shadow-lg p-8 h-fit sticky top-10">
            <a class="text-red-400" href="/owners/admin">Go to Admin Page</a>

            <!-- Sort -->
            <form action="/shop" method="get" class="mb-12">
                <label class="block text-sm font-semibold text-gray-700 mb-3">
                    Sort Products
                </label>
                <select name="sortby"
                    class="w-full px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400 text-sm">
                    <option value="popular">Popular</option>
                    <option value="newest">Newest</option>
                </select>
            </form>

            <!-- Collections -->
            <div class="mb-12">
                <h4 class="text-sm font-semibold text-gray-700 mb-4">Collections</h4>
                <ul class="space-y-3 text-sm text-gray-600">
                    <li><a href="#" class="hover:text-indigo-500 transition">New Collection</a></li>
                    <li><a href="#" class="hover:text-indigo-500 transition">All Products</a></li>
                    <li><a href="#" class="hover:text-indigo-500 transition">Discounted</a></li>
                </ul>
            </div>

            <!-- Filters -->
            <div>
                <h4 class="text-sm font-semibold text-gray-700 mb-4">Filters</h4>
                <ul class="space-y-3 text-sm text-gray-600">
                    <li><a href="#" class="hover:text-indigo-500 transition">Availability</a></li>
                    <li><a href="#" class="hover:text-indigo-500 transition">Discount</a></li>
                </ul>
            </div>

        </aside>

        <!-- ================= PRODUCT GRID ================= -->
        <section class="w-[78%]">

            <% if (!products || products.length===0) { %>

                <div class="h-[60vh] flex items-center justify-center">
                    <p class="text-gray-500 text-lg">No luxury items available ✨</p>
                </div>

                <% } else { %>

                    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8">

                        <% products.forEach(product=> {
                            const bg = product.bgcolor || "#f3f4f6";
                            const panel = product.panelcolor || "#ffffff";
                            const text = product.textcolor || "#111827";
                            %>

                            <!-- ================= PRODUCT CARD ================= -->
                            <div
                                class="group bg-white rounded-3xl shadow-md hover:shadow-2xl transition overflow-hidden">

                                <!-- Image -->
                                <div class="h-56 flex items-center justify-center" style="background-color:<%= bg %>;">
                                    <img class="h-40 object-contain group-hover:scale-110 transition duration-300"
                                        src="data:image/jpeg;base64,<%= product.image.toString('base64') %>"
                                        alt="<%= product.name %>">
                                </div>

                                <!-- Info -->
                                <div class="px-5 py-4 flex justify-between items-center"
                                    style="background-color:<%= panel %>; color:<%= text %>;">
                                    <div>
                                        <h3 class="font-semibold text-sm mb-1 tracking-wide">
                                            <%= product.name %>
                                        </h3>
                                        <p class="text-sm font-medium">
                                            ₹ <%= product.price %>
                                        </p>
                                    </div>

                                    <!-- Add to Cart -->
                                    <a href="/cart/add/<%= product._id %>"
                                        class="w-9 h-9 flex items-center justify-center rounded-full bg-white shadow-lg opacity-0 group-hover:opacity-100 group-hover:scale-110 transition">
                                        <i class="ri-add-line text-lg"></i>
                                    </a>
                                </div>

                            </div>

                            <% }) %>

                    </div>

                    <% } %>

        </section>
    </div>

    <%- include('./partials/footer') %>